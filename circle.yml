machine:
  ruby:
    version: 2.4.1

  environment:
    CIRCLE_CI: true
    LINT_FACTORY: true
    AIRBRAKE_PROJECT_ID: 123456
    AIRBRAKE_API_KEY: notsosecret
    FRILANS_FINANS_BASE_URI: 'https://example.com'
    FRILANS_FINANS_CLIENT_ID: 123456
    FRILANS_FINANS_CLIENT_SECRET: notsosecret
    TWILIO_ACCOUNT_SID: XYZ
    TWILIO_AUTH_TOKEN: notsosecret
    TWILIO_NUMBER: '+46735000000'
    GOOGLE_TRANSLATE_API_KEY: XYZ

dependencies:
  post:
    - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
    - chmod +x ./cc-test-reporter

test:
  pre:
    - ./cc-test-reporter before-build
  override:
    - script/cibuild:
      parallel: true
      files:
        - spec/**/*.rb
        - spec/lib/frilans_finans_api/spec/**/*.rb
        - spec/lib/json_api_helpers/spec/**/*.rb
